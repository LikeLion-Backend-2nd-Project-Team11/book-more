<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
            integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="../css/index.css"/>
    <link rel="stylesheet" href="../css/top-bar.css"/>
    <title>BookMore</title>
</head>
<body class="bg-light vh-100">
<!-- ------------------------------------------------------------------------------------------------Top Bar-->
<script src="../js/auth.js"></script>
<script>
    const {token, isLoggedIn} = verifyToken();
</script>
<nav class="navbar fixed-top bg-family-color">
    <div class="container-fluid">
        <a class="navbar-brand en-font" href="../index.html">BookMore</a>

        <div class="d-md-block">
            <!--로그인 드롭다운------------------>
            <div class="dropdown-center bm-auth-dropdown" style="float:left;">
                <button class="btn dropdown-toggle btn-lg" style="color: #FFFFFF" type="button"
                        data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="fa-solid fa-right-to-bracket"></i>
                </button>
                <ul class="dropdown-menu dropdown-menu-end">
                    <li class="unauthorized-component"><a class="dropdown-item"  href="../users/join.html">회원가입</a></li>
                    <li class="unauthorized-component"><a class="dropdown-item" href="../users/login.html">로그인</a></li>
                    <li class="authorized-component"><a class="dropdown-item" onclick="deleteToken()">로그아웃</a></li>
                </ul>
            </div>
            <!----------------------->
            <div class="authorized-component" style="float:left;">
                <button class="btn btn-lg" style="color: #FFFFFF" type="button"><i
                        class="fa-solid fa-bell"></i></button>
            </div>

            <button class="btn btn-lg" style="color: #FFFFFF" type="button" data-bs-toggle="offcanvas"
                    data-bs-target="#offcanvasRight" aria-controls="offcanvasRight"><i
                    class="fa-solid fa-bars"></i></button>
        </div>
    </div>

    <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
        <div class="offcanvas-header pb-5">
            <button type="button" class="btn-close ms-auto" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>

        <div class="accordion accordion-flush" id="accordionExample">
            <div class="accordion-item authorized-component">
                <h2 class="accordion-header" id="headingOne">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                        마이 페이지
                    </button>
                </h2>
                <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne"
                     data-bs-parent="#accordionExample">
                    <div class="accordion-body">
                        <div class="d-grid gap-2">
                            <button class="btn" type="button">나의 정보</button>
                            <button class="btn" type="button">나의 리뷰</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="accordion-item authorized-component">
                <h2 class="accordion-header" id="headingTwo">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                        커뮤니티
                    </button>
                </h2>
                <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo"
                     data-bs-parent="#accordionExample">
                    <div class="accordion-body">
                        <div class="d-grid gap-2">
                            <button class="btn" type="button">팔로잉</button>
                            <button class="btn" type="button">팔로워</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingThree">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                        랭킹
                    </button>
                </h2>
                <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree"
                     data-bs-parent="#accordionExample">
                    <div class="accordion-body">
                        <div class="d-grid gap-2">
                            <button class="btn" type="button">탑 10</button>
                            <button class="btn authorized-component" type="button">나의 랭킹</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="accordion-item authorized-component">
                <h2 class="accordion-header" id="headingFour">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                        챌린지
                    </button>
                </h2>
                <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour"
                     data-bs-parent="#accordionExample">
                    <div class="accordion-body">
                        <div class="d-grid gap-2">
                            <button class="btn" type="button">챌린지 작성하기</button>
                            <button class="btn" type="button">챌린지 리스트</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        const authorizedComponent = document.querySelectorAll(".authorized-component");
        const unauthorizedComponent = document.querySelectorAll(".unauthorized-component");
        authorizedComponent.forEach(ele => ele.style.display = isLoggedIn ? ele.style.display : 'none')
        unauthorizedComponent.forEach(ele => ele.style.display = !isLoggedIn ? ele.style.display : 'none')
    </script>
</nav>
<!-- ------------------------------------- -->

<div class="container pt-5 w-100 d-block d-xxl-flex">
    <!-- 도서 상세 정보--------------------------------- -->
    <div class="container contents-wrapper w-100 mt-5 mb-xxl-5 me-xxl-5">

    </div>
    <!-- ------------------------------------- -->
    <!-- 리뷰 --------------------------------------- -->
    <div class="container reviews-wrapper w-100 mb-5 p-0 py-5">
        <article class="review-item mb-5 p-3 pb-5 shadow bg-white">
            <div class="review-content  d-flex">
            <canvas class="chart me-3" width="200px" height="200px" id="chart1"></canvas>
            <div>
                <h4>test</h4>
                <p>
                    test9
                </p>
            </div>
            </div>
            <div class="review-footer">
                <hr/>
                <div class="float-start">2023-01-25 13:57</div>
                <button class="btn btn-outline-danger float-end">1 <i class="fa-regular fa-heart"></i></button>
            </div>
        </article>
        <article class="review-item mb-5 p-3 pb-5 shadow bg-white">
            <div class="review-content  d-flex">
                <canvas class="chart me-3" width="200px" height="200px" id="chart2"></canvas>
                <div>
                    <h4>test</h4>
                    <p>
                        test9
                    </p>
                </div>
            </div>
            <div class="review-footer">
                <hr/>
                <div class="float-start">2023-01-25 13:57</div>
                <button class="btn btn-outline-danger float-end">1 <i class="fa-regular fa-heart"></i></button>
            </div>
        </article>
        <article class="review-item mb-5 p-3 pb-5 shadow bg-white">
            <div class="review-content  d-flex">
                <canvas class="chart me-3" width="200px" height="200px" id="chart3"></canvas>
                <div>
                    <h4>test</h4>
                    <p>
                        test9
                    </p>
                </div>
            </div>
            <div class="review-footer">
                <hr/>
                <div class="float-start">2023-01-25 13:57</div>
                <button class="btn btn-outline-danger float-end">1 <i class="fa-regular fa-heart"></i></button>
            </div>
        </article>
        <article class="review-item mb-5 p-3 pb-5 shadow bg-white">
            <div class="review-content  d-flex">
                <canvas class="chart me-3" width="200px" height="200px" id="chart4"></canvas>
                <div>
                    <h4>test</h4>
                    <p>
                        test9
                    </p>
                </div>
            </div>
            <div class="review-footer">
                <hr/>
                <div class="float-start">2023-01-25 13:57</div>
                <button class="btn btn-outline-danger float-end">1 <i class="fa-regular fa-heart"></i></button>
            </div>
        </article>
    </div>
    <!-- ------------------------------------------- -->
</div>
<script>
    const chart1 = document.getElementById('chart1');
    const chart2 = document.getElementById('chart2');

    const labels = [
        '전문성',
        '재미',
        '가독성',
        '소장가치',
        '난이도'
    ]

    const data1 = {
        labels,
        datasets: [{
            data: [4, 4, 3, 5, 3],
            fill: true,
            backgroundColor: 'rgba(255, 99, 132, 0.2)',
            borderColor: 'rgb(255, 99, 132)',
            pointBackgroundColor: 'rgb(255, 99, 132)',
            pointBorderColor: '#fff',
            pointHoverBackgroundColor: '#fff',
            pointHoverBorderColor: 'rgb(255, 99, 132)'
        }]
    }

    const data2 = {
        labels,
        datasets: [{
            data: [2, 3, 4, 3, 5],
            fill: true,
            backgroundColor: 'rgba(255, 99, 132, 0.2)',
            borderColor: 'rgb(255, 99, 132)',
            pointBackgroundColor: 'rgb(255, 99, 132)',
            pointBorderColor: '#fff',
            pointHoverBackgroundColor: '#fff',
            pointHoverBorderColor: 'rgb(255, 99, 132)'
        }]
    }

    const options = {
            responsive: false,
            plugins: {
                legend: {
                    display: false
                },
            },
            elements: {
                line: {
                    borderWidth: 1
                }
            },
            scales: {
                r: {
                    angleLines: {
                        display: false
                    },
                    suggestedMin: 0,
                    suggestedMax: 5
                }
            }
        }

    new Chart(chart1, {
        type: 'radar',
        data: data1,
        options
    });

    new Chart(chart2, {
        type: 'radar',
        data: data2,
        options
    });
</script>
<script src="../js/bookSearch.js"></script>
<script>
    fetchSearchBookDetail(urlSearchParams.get('isbn'));
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
</body>
</html>
